<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng Điều Khiển Người Dùng - PhoneStore</title>
    <!-- Tải Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Cấu hình Tailwind cho font Inter và màu sắc tùy chỉnh -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#1e40af', // Màu xanh đậm
                        'secondary': '#facc15', // Màu vàng/hổ phách
                        'danger': '#dc2626', // Màu đỏ
                        'success': '#10b981', // Màu xanh lá
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 font-sans text-gray-800">

    <!-- Header (Tương tự trang chủ) -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center py-4">
            <a href="#" class="text-2xl font-bold text-primary flex items-center">
                <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                Phone<span class="text-secondary">Store</span>
            </a>
            <p class="text-lg font-semibold text-gray-600">Xin chào, Nguyễn Văn A</p>
        </div>
    </header>

    <!-- Main Content: Dashboard Layout -->
    <main class="py-8 md:py-12">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-3xl font-extrabold mb-8 text-primary">Bảng Điều Khiển Tài Khoản</h1>

            <div class="flex flex-col lg:flex-row gap-8">
                
                <!-- CỘT 1: THANH ĐIỀU HƯỚNG (Sidebar) -->
                <nav class="lg:w-1/4">
                    <div class="bg-white p-6 rounded-xl shadow-lg space-y-2">
                        <!-- Navigation Items -->
                        <a href="#" onclick="showSection('dashboard')" id="nav-dashboard"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-semibold bg-blue-100 text-primary transition duration-200 hover:bg-blue-50">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3"></path></svg>
                            Tổng Quan
                        </a>
                        <a href="#" onclick="showSection('profile')" id="nav-profile"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-medium text-gray-700 transition duration-200 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                            Thông Tin Cá Nhân
                        </a>
                        <a href="#" onclick="showSection('orders')" id="nav-orders"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-medium text-gray-700 transition duration-200 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                            Đơn Hàng Của Tôi
                        </a>
                        <a href="#" onclick="showSection('addresses')" id="nav-addresses"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-medium text-gray-700 transition duration-200 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                            Sổ Địa Chỉ
                        </a>
                        
                        <!-- MỤC TIN TỨC MỚI -->
                        <a href="#" onclick="showSection('news')" id="nav-news"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-medium text-gray-700 transition duration-200 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v10a2 2 0 002 2h2m-7.5-6.5h3m-3 0h-3m3 3h3m-3 0h-3"></path></svg>
                            Tin Tức Mới Nhất
                        </a>

                        <div class="border-t my-2 pt-2"></div>
                         <a href="#" onclick="showSection('security')" id="nav-security"
                           class="nav-item flex items-center p-3 rounded-lg text-lg font-medium text-gray-700 transition duration-200 hover:bg-gray-100">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>
                            Bảo Mật
                        </a>
                        <a href="#" onclick="handleLogout()"
                           class="flex items-center p-3 rounded-lg text-lg font-medium text-danger transition duration-200 hover:bg-red-50">
                            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3v-3m6-2V7a3 3 0 013-3h3"></path></svg>
                            Đăng Xuất
                        </a>
                    </div>
                </nav>

                <!-- CỘT 2: KHU VỰC NỘI DUNG CHÍNH (Main Content Area) -->
                <div class="lg:w-3/4 bg-white p-6 md:p-8 rounded-xl shadow-lg">
                    <div id="content-dashboard" class="content-section">
                        <!-- Dashboard Overview -->
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Tổng Quan Tài Khoản</h2>
                        
                        <p class="text-xl mb-6">Chào mừng trở lại, <span class="font-bold text-primary" id="userName">Nguyễn Văn A</span>!</p>

                        <!-- Thống kê nhanh -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-blue-50 p-5 rounded-xl shadow-sm border-l-4 border-primary">
                                <p class="text-sm text-gray-500">Tổng số đơn hàng</p>
                                <p class="text-3xl font-bold text-primary mt-1" id="totalOrders">3</p>
                            </div>
                            <div class="bg-yellow-50 p-5 rounded-xl shadow-sm border-l-4 border-secondary">
                                <p class="text-sm text-gray-500">Đơn hàng chờ xử lý</p>
                                <p class="text-3xl font-bold text-secondary mt-1" id="pendingOrders">1</p>
                            </div>
                            <div class="bg-green-50 p-5 rounded-xl shadow-sm border-l-4 border-success">
                                <p class="text-sm text-gray-500">Điểm thưởng</p>
                                <p class="text-3xl font-bold text-success mt-1">2,500</p>
                            </div>
                        </div>

                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Đơn Hàng Gần Đây</h3>
                        <div id="recentOrdersList">
                            <!-- Orders will be rendered here -->
                        </div>
                        <a href="#" onclick="showSection('orders')" class="inline-block mt-4 text-primary font-medium hover:text-blue-700">Xem tất cả đơn hàng &rarr;</a>

                    </div>

                    <div id="content-profile" class="content-section hidden">
                        <!-- Profile Editing -->
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Thông Tin Cá Nhân</h2>
                        <form onsubmit="saveProfile(event)" class="space-y-4 max-w-lg">
                            <div>
                                <label for="profileName" class="block text-sm font-medium text-gray-700">Họ và Tên</label>
                                <input type="text" id="profileName" value="" required
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-primary focus:border-primary">
                            </div>
                            <div>
                                <label for="profileEmail" class="block text-sm font-medium text-gray-700">Email</label>
                                <input type="email" id="profileEmail" value="" disabled
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 bg-gray-100 cursor-not-allowed">
                            </div>
                             <div>
                                <label for="profilePhone" class="block text-sm font-medium text-gray-700">Số Điện Thoại</label>
                                <input type="tel" id="profilePhone" value=""
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-primary focus:border-primary">
                            </div>
                            <button type="submit" class="bg-primary text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg">
                                Lưu Thay Đổi
                            </button>
                            <p id="profileStatus" class="mt-3 text-sm font-medium"></p>
                        </form>
                    </div>

                    <div id="content-orders" class="content-section hidden">
                        <!-- Order History -->
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Lịch Sử Đơn Hàng</h2>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mã Đơn Hàng</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ngày Đặt</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tổng Cộng</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trạng Thái</th>
                                        <th class="px-6 py-3"></th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Orders will be rendered here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div id="content-addresses" class="content-section hidden">
                        <!-- Address Management -->
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Sổ Địa Chỉ Giao Hàng</h2>
                        <div id="addressesList" class="space-y-4">
                            <!-- Addresses will be rendered here -->
                        </div>
                        <button onclick="addAddress()" class="mt-6 flex items-center bg-secondary text-primary font-bold py-2 px-4 rounded-xl hover:bg-yellow-400 transition duration-300">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            Thêm Địa Chỉ Mới
                        </button>
                    </div>
                    
                    <!-- MỤC TIN TỨC MỚI -->
                    <div id="content-news" class="content-section hidden">
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Tin Tức & Khuyến Mãi Mới Nhất</h2>
                        <p class="text-lg text-gray-600 mb-6">Cập nhật những thông tin công nghệ, sản phẩm và ưu đãi đặc biệt từ PhoneStore.</p>

                        <div id="newsList" class="space-y-6">
                            <!-- News Item 1 -->
                            <div class="p-4 border border-gray-200 rounded-xl bg-gray-50 hover:bg-white transition duration-200 cursor-pointer shadow-sm">
                                <span class="text-xs font-semibold text-white bg-primary px-3 py-1 rounded-full mb-2 inline-block">Khuyến Mãi</span>
                                <h3 class="text-xl font-bold text-gray-900 mt-1">Sự kiện Flash Sale cuối tuần: Giảm giá đến 50% phụ kiện!</h3>
                                <p class="text-sm text-gray-500 mt-1">20/10/2024</p>
                                <p class="mt-2 text-gray-700 line-clamp-2">Cơ hội vàng để sở hữu các loại ốp lưng, tai nghe, sạc dự phòng chính hãng với mức giá không thể tin được. Chương trình chỉ diễn ra trong 48 giờ!</p>
                                <a href="#" onclick="showModal('Chi tiết khuyến mãi Flash Sale.', 'Tin tức')" class="text-primary font-medium text-sm mt-2 inline-block hover:underline">Đọc thêm &rarr;</a>
                            </div>
                            
                            <!-- News Item 2 -->
                            <div class="p-4 border border-gray-200 rounded-xl bg-gray-50 hover:bg-white transition duration-200 cursor-pointer shadow-sm">
                                 <span class="text-xs font-semibold text-white bg-success px-3 py-1 rounded-full mb-2 inline-block">Tin Công Nghệ</span>
                                <h3 class="text-xl font-bold text-gray-900 mt-1">Đánh giá chi tiết Chipset Xử Lý Di Động Thế Hệ Mới 2025</h3>
                                <p class="text-sm text-gray-500 mt-1">18/10/2024</p>
                                <p class="mt-2 text-gray-700 line-clamp-2">Phân tích chuyên sâu về hiệu năng, khả năng tiết kiệm pin và công nghệ AI tích hợp trên dòng chip di động cao cấp nhất sắp ra mắt.</p>
                                <a href="#" onclick="showModal('Chi tiết bài đánh giá Chipset.', 'Tin tức')" class="text-primary font-medium text-sm mt-2 inline-block hover:underline">Đọc thêm &rarr;</a>
                            </div>

                            <!-- News Item 3 -->
                            <div class="p-4 border border-gray-200 rounded-xl bg-gray-50 hover:bg-white transition duration-200 cursor-pointer shadow-sm">
                                 <span class="text-xs font-semibold text-white bg-secondary px-3 py-1 rounded-full mb-2 inline-block">Sản Phẩm Mới</span>
                                <h3 class="text-xl font-bold text-gray-900 mt-1">Thông báo ra mắt Series Phone 16: Thiết kế đột phá, camera siêu nét</h3>
                                <p class="text-sm text-gray-500 mt-1">15/10/2024</p>
                                <p class="mt-2 text-gray-700 line-clamp-2">Thông tin chính thức về dòng sản phẩm mới nhất của hãng điện thoại hàng đầu, bao gồm giá bán dự kiến và ngày mở bán chính thức tại PhoneStore.</p>
                                <a href="#" onclick="showModal('Thông báo ra mắt Series Phone 16.', 'Tin tức')" class="text-primary font-medium text-sm mt-2 inline-block hover:underline">Đọc thêm &rarr;</a>
                            </div>
                        </div>
                    </div>

                    <div id="content-security" class="content-section hidden">
                        <!-- Security Settings -->
                        <h2 class="text-2xl font-bold mb-6 text-gray-900 border-b pb-2">Bảo Mật Tài Khoản</h2>
                        <form onsubmit="changePassword(event)" class="space-y-4 max-w-lg">
                             <div>
                                <label for="currentPassword" class="block text-sm font-medium text-gray-700">Mật khẩu hiện tại</label>
                                <input type="password" id="currentPassword" required
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-primary focus:border-primary">
                            </div>
                             <div>
                                <label for="newPassword" class="block text-sm font-medium text-gray-700">Mật khẩu mới</label>
                                <input type="password" id="newPassword" required
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-primary focus:border-primary">
                            </div>
                             <div>
                                <label for="confirmNewPassword" class="block text-sm font-medium text-gray-700">Xác nhận mật khẩu mới</label>
                                <input type="password" id="confirmNewPassword" required
                                    class="mt-1 block w-full border border-gray-300 rounded-lg shadow-sm p-3 focus:ring-primary focus:border-primary">
                            </div>
                            <button type="submit" class="bg-primary text-white font-bold py-3 px-6 rounded-xl hover:bg-blue-700 transition duration-300 shadow-lg">
                                Đổi Mật Khẩu
                            </button>
                            <p id="passwordStatus" class="mt-3 text-sm font-medium"></p>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </main>
    
    <!-- Custom Modal for Alert/Confirmation (Thay thế alert/confirm) -->
    <div id="customModal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden z-50 flex items-center justify-center p-4" onclick="closeModal()">
        <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-6" onclick="event.stopPropagation()">
            <h3 id="modalTitle" class="text-xl font-bold mb-4 text-gray-900">Thông báo</h3>
            <p id="modalMessage" class="text-gray-600 mb-6"></p>
            <div class="flex justify-end space-x-3">
                <button id="modalConfirmButton" onclick="closeModal(true)" class="bg-primary text-white font-medium py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200 hidden">Xác nhận</button>
                <button id="modalCloseButton" onclick="closeModal(false)" class="bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-lg hover:bg-gray-300 transition duration-200">Đóng</button>
            </div>
        </div>
    </div>


    <script>
        // --- Dữ liệu giả lập ---
        const mockUser = {
            name: 'Nguyễn Văn A',
            email: 'nguyenvana@example.com',
            phone: '0987654321',
            joinDate: '15/03/2023',
            userId: 'USER12345'
        };

        const mockOrders = [
            { id: 'ORD1003', date: '15/10/2024', total: 39990000, status: 'Đang giao hàng' },
            { id: 'ORD1002', date: '01/09/2024', total: 35490000, status: 'Đã giao hàng' },
            { id: 'ORD1001', date: '20/08/2024', total: 2100000, status: 'Đã hủy' },
        ];

        let mockAddresses = [
            { id: 1, type: 'Nhà riêng', recipient: 'Nguyễn Văn A', phone: '0987654321', detail: 'Số 10, Đường Phan Chu Trinh, Phường 1, Quận Bình Thạnh, TP.HCM', isDefault: true },
            { id: 2, type: 'Cơ quan', recipient: 'Công ty ABC', phone: '0901123456', detail: 'Tầng 5, Tòa nhà Bitexco, Quận 1, TP.HCM', isDefault: false }
        ];

        // --- Hàm tiện ích ---
        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(amount);
        }
        
        // --- Logic Modal Tùy chỉnh (Thay thế Alert/Confirm) ---
        let resolveModalPromise = null;

        function showModal(message, title = 'Thông báo', isConfirm = false) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('modalConfirmButton').classList.toggle('hidden', !isConfirm);
            document.getElementById('customModal').classList.remove('hidden');

            if (isConfirm) {
                return new Promise(resolve => {
                    resolveModalPromise = resolve;
                });
            }
        }

        function closeModal(result = false) {
            document.getElementById('customModal').classList.add('hidden');
            if (resolveModalPromise) {
                resolveModalPromise(result);
                resolveModalPromise = null;
            }
        }

        // --- Logic Hiển thị Nội dung ---

        // Hàm chuyển đổi section
        function showSection(sectionId) {
            // Ẩn tất cả các sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });
            // Bỏ chọn tất cả nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('bg-blue-100', 'text-primary');
                item.classList.add('text-gray-700');
            });

            // Hiển thị section mong muốn
            const section = document.getElementById(`content-${sectionId}`);
            if (section) {
                section.classList.remove('hidden');
            }
            
            // Chọn nav item tương ứng
            const navItem = document.getElementById(`nav-${sectionId}`);
            if (navItem) {
                navItem.classList.add('bg-blue-100', 'text-primary');
                navItem.classList.remove('text-gray-700');
            }

            // Gọi hàm render nội dung cụ thể (nếu có)
            if (sectionId === 'dashboard') renderDashboard();
            if (sectionId === 'profile') loadProfileData();
            if (sectionId === 'orders') renderOrders();
            if (sectionId === 'addresses') renderAddresses();
            // Mục Tin tức không cần hàm render riêng vì nội dung đã là tĩnh HTML
        }

        // --- Render Dashboard ---
        function renderDashboard() {
            const totalOrdersEl = document.getElementById('totalOrders');
            const pendingOrdersEl = document.getElementById('pendingOrders');
            const recentOrdersListEl = document.getElementById('recentOrdersList');
            const pendingCount = mockOrders.filter(o => o.status === 'Đang giao hàng').length;

            totalOrdersEl.textContent = mockOrders.length;
            pendingOrdersEl.textContent = pendingCount;
            document.getElementById('userName').textContent = mockUser.name;
            
            // Hiển thị 2 đơn hàng gần nhất
            const recentOrdersHTML = mockOrders.slice(0, 2).map(order => `
                <div class="p-4 border rounded-lg mb-2 flex justify-between items-center hover:bg-gray-50 transition duration-150">
                    <div>
                        <p class="font-bold text-gray-800">Mã: ${order.id}</p>
                        <p class="text-sm text-gray-500">Ngày đặt: ${order.date}</p>
                    </div>
                    <div>
                        <p class="font-bold text-lg text-primary">${formatCurrency(order.total)}</p>
                        <span class="text-sm px-2 py-0.5 rounded-full ${order.status === 'Đã giao hàng' ? 'bg-success text-white' : (order.status === 'Đang giao hàng' ? 'bg-yellow-500 text-white' : 'bg-danger text-white')}">${order.status}</span>
                    </div>
                </div>
            `).join('');

            recentOrdersListEl.innerHTML = recentOrdersHTML || '<p class="text-gray-500">Chưa có đơn hàng nào.</p>';
        }

        // --- Profile Logic ---
        function loadProfileData() {
            document.getElementById('profileName').value = mockUser.name;
            document.getElementById('profileEmail').value = mockUser.email;
            document.getElementById('profilePhone').value = mockUser.phone;
        }

        function saveProfile(event) {
            event.preventDefault();
            const name = document.getElementById('profileName').value;
            const phone = document.getElementById('profilePhone').value;
            const profileStatus = document.getElementById('profileStatus');

            // Giả lập lưu dữ liệu
            mockUser.name = name;
            mockUser.phone = phone;

            profileStatus.textContent = 'Lưu thông tin thành công!';
            profileStatus.classList.remove('text-red-500');
            profileStatus.classList.add('text-success');
            
            setTimeout(() => {
                profileStatus.textContent = '';
                document.getElementById('userName').textContent = name;
            }, 3000);
        }
        
        // --- Security Logic ---
        function changePassword(event) {
            event.preventDefault();
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmNew = document.getElementById('confirmNewPassword').value;
            const passwordStatus = document.getElementById('passwordStatus');
            
            // Đặt lại trạng thái
            passwordStatus.textContent = '';
            passwordStatus.classList.remove('text-success', 'text-red-500');

            if (newPass.length < 6) {
                passwordStatus.textContent = 'Mật khẩu mới phải có ít nhất 6 ký tự.';
                passwordStatus.classList.add('text-red-500');
                return;
            }

            if (newPass !== confirmNew) {
                passwordStatus.textContent = 'Mật khẩu mới và xác nhận mật khẩu không khớp.';
                passwordStatus.classList.add('text-red-500');
                return;
            }
            
            if (current === 'password_cu_gia_lap') { // Giả lập mật khẩu cũ
                 passwordStatus.textContent = 'Mật khẩu hiện tại không chính xác.';
                 passwordStatus.classList.add('text-red-500');
                 return;
            }

            // Giả lập đổi mật khẩu thành công
            passwordStatus.textContent = 'Đổi mật khẩu thành công! Vui lòng đăng nhập lại lần sau.';
            passwordStatus.classList.add('text-success');
            
            // Xóa input
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmNewPassword').value = '';

            setTimeout(() => {
                passwordStatus.textContent = '';
            }, 5000);
        }

        // --- Order Logic ---
        function renderOrders() {
            const tableBody = document.getElementById('ordersTableBody');
            if (mockOrders.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="5" class="px-6 py-4 text-center text-gray-500">Bạn chưa có đơn hàng nào.</td></tr>';
                return;
            }
            
            const ordersHTML = mockOrders.map(order => {
                let statusClass = 'text-gray-700 bg-gray-100';
                if (order.status === 'Đã giao hàng') {
                    statusClass = 'text-success bg-green-100 font-semibold';
                } else if (order.status === 'Đang giao hàng') {
                    statusClass = 'text-yellow-700 bg-yellow-100 font-semibold';
                } else if (order.status === 'Đã hủy') {
                    statusClass = 'text-danger bg-red-100 font-semibold';
                }

                return `
                    <tr class="hover:bg-gray-50 transition duration-150">
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-primary">${order.id}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${order.date}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-800">${formatCurrency(order.total)}</td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span class="px-3 py-1 inline-flex text-xs leading-5 rounded-full ${statusClass}">
                                ${order.status}
                            </span>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                            <a href="#" onclick="showModal('Chi tiết đơn hàng ${order.id}. Vui lòng xem ở trang chi tiết đơn hàng.', 'Chi tiết Đơn hàng')" class="text-primary hover:text-blue-700">Xem Chi tiết</a>
                        </td>
                    </tr>
                `;
            }).join('');
            
            tableBody.innerHTML = ordersHTML;
        }

        // --- Address Logic ---
        function renderAddresses() {
            const listContainer = document.getElementById('addressesList');
            
            const addressesHTML = mockAddresses.map(addr => `
                <div id="address-${addr.id}" class="p-5 border rounded-xl shadow-sm bg-white hover:border-primary transition duration-200 relative">
                    ${addr.isDefault ? '<span class="absolute top-0 right-0 mt-3 mr-3 text-xs font-bold text-white bg-success px-2 py-1 rounded-full">Mặc định</span>' : ''}
                    <h4 class="text-lg font-bold text-gray-800">${addr.type} <span class="text-sm font-normal text-gray-500">(${addr.recipient} - ${addr.phone})</span></h4>
                    <p class="text-gray-600 mt-1">${addr.detail}</p>
                    <div class="mt-3 space-x-3">
                        <button onclick="editAddress(${addr.id})" class="text-primary hover:text-blue-700 text-sm font-medium">Chỉnh sửa</button>
                        ${!addr.isDefault ? `<button onclick="setDefaultAddress(${addr.id})" class="text-secondary hover:text-yellow-600 text-sm font-medium">Đặt làm Mặc định</button>` : ''}
                        <button onclick="confirmRemoveAddress(${addr.id})" class="text-danger hover:text-red-700 text-sm font-medium">Xóa</button>
                    </div>
                </div>
            `).join('');

            listContainer.innerHTML = addressesHTML || '<p class="text-gray-500">Bạn chưa có địa chỉ nào được lưu.</p>';
        }

        function setDefaultAddress(id) {
            mockAddresses.forEach(addr => addr.isDefault = (addr.id === id));
            renderAddresses();
            showModal('Địa chỉ đã được đặt làm mặc định thành công.');
        }

        async function confirmRemoveAddress(id) {
            const confirmed = await showModal('Bạn có chắc chắn muốn xóa địa chỉ này?', 'Xác nhận Xóa', true);
            if (confirmed) {
                mockAddresses = mockAddresses.filter(addr => addr.id !== id);
                renderAddresses();
                showModal('Địa chỉ đã được xóa.');
            }
        }

        function editAddress(id) {
            // Giả lập logic chỉnh sửa: Ở đây chỉ hiển thị modal thông báo
            const addr = mockAddresses.find(a => a.id === id);
            if (addr) {
                showModal(`Bạn đang chỉnh sửa địa chỉ ${addr.type}: ${addr.detail}`, 'Chỉnh sửa Địa chỉ');
            }
        }
        
        function addAddress() {
            // Giả lập logic thêm địa chỉ
             showModal('Chức năng Thêm địa chỉ mới đã được kích hoạt. Ở ứng dụng thực tế sẽ mở form nhập liệu.', 'Thêm Địa chỉ mới');
        }

        // --- Logic Đăng xuất ---
        async function handleLogout() {
            const confirmed = await showModal('Bạn có chắc chắn muốn đăng xuất khỏi tài khoản?', 'Xác nhận Đăng xuất', true);
            if (confirmed) {
                // Giả lập logic đăng xuất
                showModal('Đăng xuất thành công! Chuyển hướng về trang chủ.', 'Đăng Xuất');
                // Thực tế: window.location.href = '/';
            }
        }

        // Khởi tạo trang khi tải xong
        window.onload = function() {
            // Mặc định hiển thị mục Tổng Quan
            showSection('dashboard');
        };
    </script>
</body>
</html>